\subsection{Técnicas para la integración Web-SGBD}

En las siguientes subsecciones se comentarán algunas de las técnicas y tecnologías más utilizadas para la integración de bases de datos en entornos web.

\subsubsection{CGI - Common Gateway Interface}

La interfaz de pasarela común es un protocolo estándar que define cómo los \textit{scripts CGI} se comunican con el servidor Web. Un script CGI está diseñado para aceptar y devolvder datos que sean conformes con la especificación de CGI, pudiendo así reutilizar los scripts independientemente del servidor Web que se esté utilizando. 

A continuación se describe la forma de actuación de un CGI de forma esquemática:

\begin{enumerate}
	\item En primera instancia, el servidor recibe una petición (el cliente ha activado un URL que contiene el CGI), y comprueba si se trata de una invocación de un CGI.
	\item El servidor comprueba los archivos de configuración y de acceso para asegurarse de que el solicitante tiene acceso al script CGI. 
	\item El servidor prepara el entorno para ejecutar el script.
	\item El servidor ejecuta el script, leyendo las variables de entorno y su entrada estándar.
	\item El script realiza su función. Como consecuencia de su actividad se va generando un objeto MIME que la aplicación escribe en su salida estándar.
	\item Cuando el script finaliza, el servidor envía la información producida, junto con información propia, al cliente, que se encontraba en estado de espera.
\end{enumerate}

Actualmente, ésta es la solución que más se está utilizando para la creación de interfaces Web-SGBD. Entre las ventajas de la programación CGI, se pueden destacar su sencillez, ya que es muy fácil de entender; es un lenguaje de programación independiente, soportando lenguajes como C, C++, Java, Perl, Python, etc. y es un estándar para usarse en todos los servidores Web.

Como desventaja se puede destacar la baja eficiencia que tiene el uso de CGI, debido a que el servidor Web tiene que cargar el script CGI y establecer la conexión con la base de datos cada vez que se recibe una petición.

\subsubsection{Lenguajes de script}

Un \textit{script} es un código escrito en un lenguaje de porgramación que se incrusta en el código HTML de una página Web y que se puede ejecutar en el lado del servidor o del cliente, añadiendo nuevas funcionalidades a la página Web. De esta forma, se pueden automatizar funciones para acceder a los datos de la base de datos, creando nuevo código HTML y mostrando así lás páginas Web personalizadas con los datos que pide el cliente. 

Algunos de los lenguajes de script más utilizados actualmente se comentan a continuación.

\paragraph{JavaScript}

JavaScript es un lenguaje de scripts basado en Java, orientado a objetos, interpertado, débilmente tipado e incrustado en código HTML. Permite incluir en las páginas HTML funciones que respondan a los sucesos del usuario, como clics de ratón, eventos de teclado, etc., o acceso a la base de datos si se ejecuta en el lado del servidor. 

\paragraph{VBScript}

VBScript es otro lenguaje de scripts procedimental (basado en subrutinas), muy similar a JScript en cuanto a funcionalidad se refiere, pero con la sintaxis de Visual Basic. 

\paragraph{Perl y PHP}

Perl (Practical Extraction and Report Language) es un lenguaje de programación de alto nivel interpretado que combina características de C y de diferentes órdenes de sistemas UNIX. Hoy en día es uno de los lenguajes de script más utilizados para su ejecución en el lado del servidor.

Por otra parte, PHP (Hypertext Preprocessor) es otro lenguaje de script de código abierto que se incrusta en HTML y que es soportado por multitud de servidores Web. Uno de los mayores usos que tiene es el acceso a bases de datos en el lado del servidor, utilizando como SGBD \textit{MySQL} y como servidor, \textit{HTTP Apache}. 

\subsubsection{Java}

Java es un lenguaje de programación, orientado a objetos e interpretado desarrollado por Sun Microsystems, que se ha convertido en un estándar \textit{de facto} para la programación basada en la Web, permitiendo crear tanto aplicaciones Web (\textbf{applets)}, como aplicaciones de servidor (\textbf{servlets)}. 

Además, Java es un lenguaje independiente de la plataforma, ya que es interpretado en su máquina virtual (JVM - Java Virtual Machine). Otras características de este lenguaje es que posee un recolector de basura, mecanismos de seguridad con comprobación de tipos y la ausencia de punteros. 

En 1999, Sun crea \textbf{J2EE}, una arquitectura pensada para aplicaciones empresariales robustas, escalables, multiusuario y seguras. Esta plataforma incluye todo lo necesario para el desarrollo de aplicaciones Web, aplicaciones de servidor, presentación en el cliente y las comunicaciones necesarias para comunicar el cliente, el servidor y la bases de datos (ver Figura \ref{fig:j2ee}). 

\imagen{./imagenes/j2ee}{0.5}{Arquitectura J2EE simplificada}{fig:j2ee}

\paragraph{JDBC}

JDBC es la técnica mas utilizada y madura para el acceso a un SGBD relacional desde Java. JDBC define una API para acceder a diferentes SGBD relacionales, soportando toda la funcionalidad SQL básica. Además, por encima del JDBC se construyen interfaces de aplicación a mayor nivel como,  por ejemplo, SQL embebido en Java o una correspondencia directa de tablas de una base de datos relacional a clases Java (Hibernate). 

Para el acceso a la base de datos por parte de las aplicaciones, hay diferentes opciones:

\begin{milista}
	\item Usar el puente JDBC-ODBC, donde el controlador ODBC actúa como nivel mediador entre el SGBD y el controlador JDBC. Es necesario cuando no se puede acceder directamente a las bibliotecas del fabricante del SGBD.
	\item Usar el controlador JDBC parcial, que convierte llamadas JDBC directamente a llamadas del API del SGBD.
	\item Usar JDBC puro para middleware de bases de datos, que traduce las llamadas del controlador JDBC al protocolo del middleware, el cual es traducido de nuevo al protocolo del SGBD. De este modo, existe más variedad a la hora de usar diferentes SGBD.
	\item Usar JDBC puro con conexión directa al SGBD. Esto conlleva utilizar un controlador diferente, según el SGBD que se utilice. 
\end{milista}

Sea cual sea la opción de comunicación elegida, el proceso de interacción con la base de datos es el siguiente: 

\begin{enumerate}
	\item Registrarse en el controlador JDBC, utilizando el método \texttt{Class.forName()}.
	\item Abrir la conexión con el SGBD, utilizando el método \texttt{DriverManager.getConnection()}, indicando la URL del SGBD, que tiene el siguiente formato: \texttt{protocolo:subprotocolo:subnombre}. Por ejemplo: \texttt{jdbc:odbc:www.dreamhome.es.co.uk/dhdatabase}.
	\item Ejecutar una sentencia SQL sobre la base de datos, con los método \texttt{createStatement} y texttt{execute()}.
	\item Procesar los resultados obtenidos (si la sentencia era una consulta).
	\item Cerrar la conexión, con el método \texttt{close()}.
\end{enumerate}

